{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Emma\\\\Documents\\\\GitHub\\\\Emp\\\\sports-lottery\\\\src\\\\App.js\";\nimport React from 'react';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.module.css';\nimport Landing from './components/UI/LandingPage/landing';\nimport Navs from './components/UI/Navbar/Navs';\nimport classes from './App.module.css';\nimport * as actions from './store/actions/index';\nimport { connect } from 'react-redux';\nimport ResultPage from './containers/Board/ResultPage';\nimport { IdleTimeoutModal } from './components/UI/IdleTimeoutModal/IdleTimeoutModal';\nimport IdleTimer from 'react-idle-timer';\nimport Board from './containers/Board/Board';\nimport Transfers from './containers/Transfers/Transfers';\nimport ForgotPassword from './components/loginLogout/forgotPassword/forgotPassword';\nimport Settings from './containers/Settings/Settings';\nimport Signup from './containers/Signup/Signup';\nimport UserPlayHistory from './components/gameHistory/userPlayHistory/UserPlayHistory';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLogout = () => {\n      this.props.onLogout();\n      this.props.onSetIsLoggedIn(false);\n      this.props.onSetIsPaying(false);\n      this.props.onSetIsPaid(false);\n      this.props.onSetForgot(false);\n      if (this.props.slips !== null && this.props.slips.length > 0) this.props.onDeleteAndResetAll();\n      this.props.history.push(\"/\");\n      this.props.onSetBoardLoading(false);\n    };\n\n    this.state = {\n      timeout: 1000 * 60 * 15,\n      showModal: false,\n      isTimedOut: false\n    };\n    this.idleTimer = null;\n    this.onAction = this._onAction.bind(this);\n    this.onActive = this._onActive.bind(this);\n    this.onIdle = this._onIdle.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  } // onUnload = e => {\n  //   e.preventDefault();\n  //   e.returnValue = 'hello';\n  //   this.handleLogout();\n  // }\n  // componentDidMount() {\n  //   window.addEventListener(\"beforeunload\", this.onUnload);\n  // }\n  // componentWillUnmount() {\n  //   window.removeEventListener(\"beforeunload\", this.onUnload);\n  // }\n\n\n  _onAction(e) {\n    this.setState({\n      isTimedOut: false\n    });\n  }\n\n  _onActive(e) {\n    this.setState({\n      isTimedOut: false\n    });\n  }\n\n  _onIdle(e) {\n    const isTimedOut = this.state.isTimedOut;\n\n    if (isTimedOut) {\n      this.handleLogout();\n      setTimeout(() => {\n        this.setState({\n          showModal: false\n        });\n        window.location.reload();\n      }, 1500);\n    } else {\n      this.setState({\n        showModal: true\n      });\n      this.idleTimer.reset();\n      this.setState({\n        isTimedOut: true\n      });\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showModal: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.App,\n      children: [this.props.isLoggedIn ? /*#__PURE__*/_jsxDEV(IdleTimer, {\n        ref: ref => {\n          this.idleTimer = ref;\n        },\n        element: document,\n        onActive: this.onActive,\n        onIdle: this.onIdle,\n        onAction: this.onAction,\n        debounce: 250,\n        timeout: this.state.timeout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.Navs,\n        children: /*#__PURE__*/_jsxDEV(Navs, {\n          setForgot: this.props.onSetForgot,\n          setBoardLoading: this.props.onSetBoardLoading,\n          isLoggedIn: this.props.isLoggedIn,\n          login: this.props.onLogin,\n          logout: this.props.onLogout,\n          deleteAndResetAll: this.props.onDeleteAndResetAll,\n          loading: this.props.loading,\n          slips: this.props.slips,\n          forgotPassword: this.props.forgotPassword,\n          showFunds: this.props.showFunds,\n          firstName: this.props.user.name,\n          setShowFunds: this.props.onSetShowFunds,\n          user: this.props.user,\n          toggleShowFunds: this.props.onToggleShowFunds,\n          setEditIndex: this.props.onSetEditIndex,\n          setIsPaying: this.props.onSetIsPaying,\n          setIsPaid: this.props.onSetIsPaid\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/transfers\",\n          component: Transfers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/results\",\n          component: ResultPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/signup\",\n          component: Signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/forgot-password\",\n          component: ForgotPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/settings\",\n          component: Settings\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/history\",\n          component: UserPlayHistory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/play\",\n          component: Board\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Landing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), this.props.isLoggedIn ? /*#__PURE__*/_jsxDEV(IdleTimeoutModal, {\n        showModal: this.state.showModal,\n        handleClose: this.handleClose,\n        handleLogout: this.handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapstateToProps = state => {\n  return {\n    showFunds: state.board.showFunds,\n    slips: state.board.slips,\n    loginMessage: state.login.loginMessage,\n    user: state.login.user,\n    isLoggedIn: state.login.isLoggedIn,\n    forgotPassword: state.login.forgotPassword,\n    loading: state.login.loading,\n    isFaCup: state.config.isFaCup,\n    kickOffTime: state.config.kickOffTime,\n    kickOffDate: state.config.kickOffDate\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSetBoardLoading: loading => dispatch(actions.setBoardLoading(loading)),\n    onLogout: () => dispatch(actions.logout()),\n    onSetIsLoggedIn: value => dispatch(actions.setIsLoggedIn(value)),\n    onSetForgot: value => dispatch(actions.setForgot(value)),\n    onLogin: (email, password) => dispatch(actions.login(email, password)),\n    onToggleShowFunds: () => dispatch(actions.toggleShowFunds()),\n    onDeleteAndResetAll: () => dispatch(actions.deleteAndResetAll()),\n    onSetShowFunds: () => dispatch(actions.setShowFunds()),\n    onResetReduxBoard: () => dispatch(actions.resetReduxBoard()),\n    onSetEditIndex: value => dispatch(actions.setEditIndex(value)),\n    onSetIsPaying: isPaying => dispatch(actions.setIsPaying(isPaying)),\n    onSetIsPaid: isPaid => dispatch(actions.setIsPaid(isPaid))\n  };\n};\n\nexport default withRouter(connect(mapstateToProps, mapDispatchToProps)(App));","map":{"version":3,"sources":["C:/Users/Emma/Documents/GitHub/Emp/sports-lottery/src/App.js"],"names":["React","Switch","Route","withRouter","Redirect","Landing","Navs","classes","actions","connect","ResultPage","IdleTimeoutModal","IdleTimer","Board","Transfers","ForgotPassword","Settings","Signup","UserPlayHistory","App","Component","constructor","props","handleLogout","onLogout","onSetIsLoggedIn","onSetIsPaying","onSetIsPaid","onSetForgot","slips","length","onDeleteAndResetAll","history","push","onSetBoardLoading","state","timeout","showModal","isTimedOut","idleTimer","onAction","_onAction","bind","onActive","_onActive","onIdle","_onIdle","handleClose","e","setState","setTimeout","window","location","reload","reset","render","isLoggedIn","ref","document","onLogin","loading","forgotPassword","showFunds","user","name","onSetShowFunds","onToggleShowFunds","onSetEditIndex","mapstateToProps","board","loginMessage","login","isFaCup","config","kickOffTime","kickOffDate","mapDispatchToProps","dispatch","setBoardLoading","logout","value","setIsLoggedIn","setForgot","email","password","toggleShowFunds","deleteAndResetAll","setShowFunds","onResetReduxBoard","resetReduxBoard","setEditIndex","isPaying","setIsPaying","isPaid","setIsPaid"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './App.module.css';\r\nimport Landing from './components/UI/LandingPage/landing';\r\nimport Navs from './components/UI/Navbar/Navs'\r\nimport classes from './App.module.css';\r\nimport * as actions from './store/actions/index'\r\nimport { connect } from 'react-redux'\r\n\r\nimport ResultPage from './containers/Board/ResultPage';\r\nimport { IdleTimeoutModal } from './components/UI/IdleTimeoutModal/IdleTimeoutModal';\r\nimport IdleTimer from 'react-idle-timer';\r\nimport Board from './containers/Board/Board';\r\nimport Transfers from './containers/Transfers/Transfers';\r\nimport ForgotPassword from './components/loginLogout/forgotPassword/forgotPassword';\r\nimport Settings from './containers/Settings/Settings';\r\nimport Signup from './containers/Signup/Signup';\r\nimport UserPlayHistory from './components/gameHistory/userPlayHistory/UserPlayHistory';\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      timeout: 1000 * 60* 15,\r\n      showModal: false,\r\n      isTimedOut: false,\r\n    }\r\n    this.idleTimer = null;\r\n    this.onAction = this._onAction.bind(this);\r\n    this.onActive = this._onActive.bind(this);\r\n    this.onIdle = this._onIdle.bind(this);\r\n\r\n\r\n    this.handleClose = this.handleClose.bind(this)\r\n    this.handleLogout = this.handleLogout.bind(this)\r\n  }\r\n  // onUnload = e => {\r\n  //   e.preventDefault();\r\n  //   e.returnValue = 'hello';\r\n  //   this.handleLogout();\r\n  // }\r\n  // componentDidMount() {\r\n  //   window.addEventListener(\"beforeunload\", this.onUnload);\r\n  // }\r\n\r\n  // componentWillUnmount() {\r\n  //   window.removeEventListener(\"beforeunload\", this.onUnload);\r\n  // }\r\n  _onAction(e) {\r\n    this.setState({ isTimedOut: false })\r\n  }\r\n\r\n  _onActive(e) {\r\n    this.setState({ isTimedOut: false })\r\n  }\r\n\r\n  _onIdle(e) {\r\n    const isTimedOut = this.state.isTimedOut\r\n    if (isTimedOut) {\r\n      this.handleLogout();\r\n      setTimeout(()=>{\r\n\r\n        this.setState({ showModal: false })\r\n        window.location.reload();\r\n      }, 1500)\r\n    } else {\r\n      this.setState({ showModal: true })\r\n      this.idleTimer.reset();\r\n      this.setState({ isTimedOut: true })\r\n    }\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({ showModal: false });\r\n  }\r\n\r\n  handleLogout = () => {\r\n    this.props.onLogout();\r\n    this.props.onSetIsLoggedIn(false);\r\n    this.props.onSetIsPaying(false);\r\n    this.props.onSetIsPaid(false);\r\n    this.props.onSetForgot(false);\r\n\r\n    if (this.props.slips !== null && this.props.slips.length > 0)\r\n      this.props.onDeleteAndResetAll();\r\n    this.props.history.push(\"/\");\r\n    this.props.onSetBoardLoading(false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={classes.App}>\r\n        {this.props.isLoggedIn ?\r\n          <IdleTimer\r\n            ref={ref => { this.idleTimer = ref }}\r\n            element={document}\r\n            onActive={this.onActive}\r\n            onIdle={this.onIdle}\r\n            onAction={this.onAction}\r\n            debounce={250}\r\n            timeout={this.state.timeout} />\r\n          : null}\r\n        <div className={classes.Navs}><Navs setForgot={this.props.onSetForgot} setBoardLoading={this.props.onSetBoardLoading}\r\n          isLoggedIn={this.props.isLoggedIn} login={this.props.onLogin} logout={this.props.onLogout}\r\n          deleteAndResetAll={this.props.onDeleteAndResetAll} loading={this.props.loading}\r\n          slips={this.props.slips} forgotPassword={this.props.forgotPassword}\r\n          showFunds={this.props.showFunds} firstName={this.props.user.name}\r\n          setShowFunds={this.props.onSetShowFunds} user={this.props.user}\r\n          toggleShowFunds={this.props.onToggleShowFunds} setEditIndex={this.props.onSetEditIndex}\r\n          setIsPaying={this.props.onSetIsPaying} setIsPaid={this.props.onSetIsPaid}\r\n        /></div>\r\n        <Switch>\r\n          <Route path=\"/transfers\" component={Transfers} />\r\n          <Route path=\"/results\" component={ResultPage} />\r\n          <Route path=\"/signup\" component={Signup} />\r\n          <Route path=\"/forgot-password\" component={ForgotPassword} />\r\n          <Route path=\"/settings\" component={Settings} />\r\n          <Route path=\"/history\" component={UserPlayHistory} />\r\n          <Route path=\"/play\" component={Board} />\r\n          <Route exact path=\"/\" component={Landing} />\r\n          <Redirect to=\"/\" />\r\n        </Switch>\r\n        {this.props.isLoggedIn ?\r\n          <IdleTimeoutModal\r\n            showModal={this.state.showModal}\r\n            handleClose={this.handleClose}\r\n            handleLogout={this.handleLogout}\r\n          />\r\n          : null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapstateToProps = (state) => {\r\n  return {\r\n    showFunds: state.board.showFunds,\r\n    slips: state.board.slips,\r\n\r\n    loginMessage: state.login.loginMessage,\r\n    user: state.login.user,\r\n    isLoggedIn: state.login.isLoggedIn,\r\n    forgotPassword: state.login.forgotPassword,\r\n    loading: state.login.loading,\r\n\r\n    isFaCup: state.config.isFaCup,\r\n    kickOffTime: state.config.kickOffTime,\r\n    kickOffDate: state.config.kickOffDate\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onSetBoardLoading: (loading) => dispatch(actions.setBoardLoading(loading)),\r\n    onLogout: () => dispatch(actions.logout()),\r\n    onSetIsLoggedIn: (value) => dispatch(actions.setIsLoggedIn(value)),\r\n    onSetForgot: (value) => dispatch(actions.setForgot(value)),\r\n    onLogin: (email, password) => dispatch(actions.login(email, password)),\r\n    onToggleShowFunds: () => dispatch(actions.toggleShowFunds()),\r\n    onDeleteAndResetAll: () => dispatch(actions.deleteAndResetAll()),\r\n    onSetShowFunds: () => dispatch(actions.setShowFunds()),\r\n    onResetReduxBoard: () =>\r\n      dispatch(actions.resetReduxBoard()),\r\n    onSetEditIndex: (value) =>\r\n      dispatch(actions.setEditIndex(value)),\r\n    onSetIsPaying: (isPaying) =>\r\n      dispatch(actions.setIsPaying(isPaying)),\r\n    onSetIsPaid: (isPaid) =>\r\n      dispatch(actions.setIsPaid(isPaid)),\r\n  };\r\n};\r\nexport default withRouter(connect(mapstateToProps, mapDispatchToProps)(App));\r\n"]},"metadata":{},"sourceType":"module"}